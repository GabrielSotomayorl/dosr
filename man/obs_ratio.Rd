% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/public_api.R
\name{obs_ratio}
\alias{obs_ratio}
\title{Calcula razones (ratios) para diseños complejos}
\usage{
obs_ratio(
  designs,
  sufijo = NULL,
  num,
  den,
  des = NULL,
  multi_des = TRUE,
  es_var_estudio = FALSE,
  usar_etiqueta_var = TRUE,
  sig = FALSE,
  filt = NULL,
  rm_na_var = TRUE,
  parallel = FALSE,
  n_cores = NULL,
  save_xlsx = TRUE,
  dir = "output",
  formato = TRUE,
  decimales = 2,
  verbose = TRUE
)
}
\arguments{
\item{designs}{Un objeto `tbl_svy` o una lista de ellos.}

\item{sufijo}{Vector de strings para sufijos (p.ej. c("2020","2022")).}

\item{num}{String con el nombre de la variable **numerador**.}

\item{den}{String con el nombre de la variable **denominador**.}

\item{des}{Un vector de strings con los nombres de las variables de desagregación.}

\item{multi_des}{Booleano. Si `TRUE` (por defecto), calcula todas las combinaciones de `des`. Si `FALSE`, solo calcula las desagregaciones simples.}

\item{es_var_estudio}{Booleano. Si `TRUE`, aplica criterios de fiabilidad menos estrictos para el tamaño muestral. Por defecto es `FALSE`.}

\item{usar_etiqueta_var}{Booleano. Si `TRUE` (por defecto), usa las etiquetas de
las variables `num` y `den` (si existen) como títulos y rótulos en los reportes
de Excel; si no hay etiqueta disponible, usa el nombre de la variable.}

\item{sig}{Booleano. Si `TRUE`, calcula y añade pruebas de significancia estadística a las hojas de reporte con formato. Por defecto es `FALSE`.}

\item{filt}{Un string con una expresión de filtro para `dplyr::filter()`.}

\item{rm_na_var}{Booleano. Si `TRUE`, elimina observaciones con `NA` en el
**numerador o** el **denominador** antes de calcular la razón.}

\item{parallel}{Booleano. Activa el cálculo en paralelo.}

\item{n_cores}{Entero. Número de núcleos a usar. Si es NULL, se usa un valor seguro.}

\item{save_xlsx}{Booleano. Si `TRUE`, guarda un reporte en Excel.}

\item{dir}{Un string con la ruta del directorio donde se guardará el archivo Excel. Por defecto es `"output"`.}

\item{formato}{Booleano. Si `TRUE`, genera un reporte de Excel con formato avanzado.}

\item{decimales}{Entero. Número de decimales para las estimaciones en Excel.}

\item{verbose}{Booleano. Si `TRUE` (por defecto), muestra mensajes de progreso.}
}
\value{
Un `data.frame` con los resultados consolidados (invisiblemente).
}
\description{
Calcula la razón entre dos variables numéricas (numerador/denominador)
sobre uno o más objetos `tbl_svy`, con las mismas opciones de desagregación,
paralelización y reporte usadas en `obs_media`.
}
